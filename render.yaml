services:
  - type: web
    name: paper-trading-backend
    runtime: docker
    plan: free
    dockerfilePath: backend.Dockerfile
    dockerContext: .
    envVars:
      # Render will automatically inject the DATABASE_URL
      - key: DATABASE_URL
        fromDatabase:
          name: paper-trading-db
          property: connectionString
      # Reference the eventual public URL of your Nginx frontend
      - key: FRONTEND_URL
        value: "https://your-new-static-site.onrender.com"
      - key: FLASK_CONFIG
        value: "prod"
    healthCheckPath: /health

databases:
  - name: paper-trading-db
    plan: free